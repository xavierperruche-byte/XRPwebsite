---
// src/pages/magazine.astro - Homepage example using the layout
import Layout from '../layouts/Layout.astro';
import '../styles/global.css';
import UniformGrid from '../components/ImageGrid.astro';
import ClickableMasonryGrid from '../components/ClickableMasonryGrid.astro';
import BackToTop from '../components/BackToTop.astro';
---


<Layout 
  title="Services | We.TheAgency" 
  description="Une marque qui inspire. Une strat√©gie qui performe.."
  currentPage="/magazine"
>
 
  <!-- Navigation secondaire flottante -->
  <nav class="floating-subnav" id="floatingSubnav">
    <div class="subnav-container">
      <a href="#Fashion" class="subnav-link active">
        <span class="nav-icon">üëó</span>
        <span class="nav-text">Fashion</span>
      </a>
      <a href="#Active" class="subnav-link">
        <span class="nav-icon">üèä</span>
        <span class="nav-text">Active & Swim</span>
      </a>
      <a href="#Beauty" class="subnav-link">
        <span class="nav-icon">üíÖ</span>
        <span class="nav-text">Beauty & Soul</span>
      </a>
     <a href="#Lifestyle" class="subnav-link">
        <span class="nav-icon">üß≥</span>
        <span class="nav-text">Lifestyle</span>
      </a>
      <a href="#Gateways" class="subnav-link">
        <span class="nav-icon">üõ´</span>
        <span class="nav-text">Gateways</span>
      </a>
      <a href="#Meet" class="subnav-link">
        <span class="nav-icon">ü§ù</span>
        <span class="nav-text">Meet</span>
      </a>
        <a href="#Art" class="subnav-link">
        <span class="nav-icon">üóø</span>
        <span class="nav-text">Art & Books</span>
      </a>
     <a href="#Edition" class="subnav-link">
        <span class="nav-icon">üìñ</span>
        <span class="nav-text">Edition</span>
      </a>
    </div>
  </nav>


  <!-- Spacer pour compenser le header et la subnav -->
  <div class="spacer-top"></div>


  <!-- Hero Section - First Title -->
  <section class="hero-section-first">
    <div class="hero-container">
      <h2 class="hero-title-first">Magazine</h2>
    </div>
  </section>

  <!-- Hero Section - Second Title -->
  <section class="hero-section-second">
    <div class="hero-container">
      <h2 class="hero-title-second">Septembre ‚Äì D√©cembre 2025</h2>
    </div>
  </section>


  <!-- Features Section -->


<section id="Fashion" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
 <div class="hero-container">
      <h2 class="hero-title-first">Fashion</h2>
    </div>


<ClickableMasonryGrid 
    images={[
      {src: '/images/IMG_8796.webp', alt: 'Around Mrs. O', caption: 'Around Mrs. O - Voyage au bout des steppes', url: 'https://www.we-theagency.com/aroundmrs-o/' },
      {src: '/images/Viyara.webp', alt: 'Viyara', caption: 'Viyara - avoir la foi', url: 'https://www.we-theagency.com/viyara-atelier/' },
      {src: '/images/Ulaland.webp', alt: 'Ulaland', caption: 'Ulaland - Chaque pi√®ce est con√ßue pour rendre visible cette joie imperturbable qui ne vient pas de l‚Äôext√©rieur mais de ce qui est en nous.', url: 'https://www.wepopup.net/prod/ulaland/' },
      {src: '/images/BeyondMC.webp', alt: 'Meune', caption: 'Meune - Ce qui me lit', url: 'https://www.wepopup.net/prod/meune-ce-qui-me-lie/' },
      {src: '/images/PIOUPIOUxLUCAS.webp', alt: 'Meune', caption: 'Meune - Ce qui me lit', url: 'https://www.wepopup.net/prod/meune-ce-qui-me-lie/' },
      {src: '/images/Timeline.webp', alt: 'Meune', caption: 'Meune - Ce qui me lit', url: 'https://www.wepopup.net/prod/meune-ce-qui-me-lie/' },
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={3} 
  />
</section>

<section id="Active" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Active & Swim</h2>
    </div>


<ClickableMasonryGrid 
    images={[
      {src: '/images/Kaio.webp', alt: 'Kaio Swim', caption: 'Kaio Swim - Le Plunge Red, monochrome et iconique. A glisser dans son vestiaire swimwear cet √©t√©.', url: 'https://www.wepopup.net/prod/le-plunge-red-monochrome-et-iconique/' },
      {src: '/images/Atelier1202.webp', alt: 'Atelier 1202', caption: 'Atelier 1202 - A brand of intimates, swimwear and accessories with a romantic minimalist vein, developed from the desire to blend the essence of Brazilian fashion with the high standard of Swiss quality.', url: 'https://www.we-theagency.com/brandmooks-ss-20/' },
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={2} 
  />

</section>

<section id="Beauty" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Beauty & Soul</h2>
    </div>

<ClickableMasonryGrid 
    images={[
      {src: '/images/Clarins.webp', alt: 'Clarins', caption: 'Clarins - La biodiversit√©, c‚Äôest la vie. En prendre soin, c‚Äôest donner du sens √† la sienne.', url: 'https://www.we-theagency.com/we-lemagazine-fw2021/' },
      {src: '/images/VisuelStudio.webp', alt: 'Diane Servant', caption: 'Diane Servant - Une adresse confidentielle √† Gen√®ve.', url: 'https://www.we-theagency.com/dianeservant/' },
      {src: '/images/Kalos.webp', alt: 'Kalos', caption: 'Kalos Montreux - La Beaut√©', url: 'https://www.we-theagency.com/la-beaute/' },
      {src: '/images/BeyondMC.webp', alt: 'Beyond Men\'s Care', caption: 'Beyond Men\'s Care - Pour un h√©donisme engag√©.', url: 'https://www.wepopup.net/prod/beyond-men-s-care/' },
      {src: '/images/PIOUPIOUxLUCAS.webp', alt: 'PiouPiou Lucas du Tertre', caption: 'PiouPiou Cosmetics x Lucas du Tertre - Nous nous r√©unissons dans le monde de l‚Äôenfance.', url: 'https://www.wepopup.net/prod/pioupiou-cosmetics/' },
      {src: '/images/Timeline.webp', alt: 'Timeline¬Æ Skin Health', caption: 'Timeline¬Æ Skin Health - La marque suisse de long√©vit√© cellulaire annonce une d√©couverte dans la technologie du vieillissement cutan√© et lance : Timeline¬Æ Skin Health.', url: 'https://www.we-theagency.com/timelinenutrition/' },     // Ajoutez autant d'images que vous voulez ici
      {src: '/images/tessaang.webp', alt: 'Tessa Ang', caption: 'Over 50, Et Alors ? Une interview avec Tessa Ang', url: 'https://www.we-theagency.com/over-50-et-alors/' },     
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={3} 
  />
</section>

<section id="Lifestyle" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Lifestyle</h2>
    </div>

<ClickableMasonryGrid 
    images={[
      {src: '/images/Partisan.webp', alt: 'PARTISAN COLLECTOR', caption: 'PARTISAN COLLECTOR- L‚Äôessence du beau.', url: 'https://www.we-theagency.com/we-lemagazine-fw2021/' },
      {src: '/images/Escalet.webp', alt: 'L\'Escalet', caption: 'L\'Escalet - The sparkle of turquoise water under the morning sun, the cool and transparent coves, the crystal-clear nights lit by the Milky Way and the endless constellations are the main inputs for my jewellery designs.', url: 'https://www.we-theagency.com/dianeservant/' },
      {src: '/images/Thalie.webp', alt: 'THALIE PARIS', caption: 'THALIE PARIS - Thalie, une muse par qui la nature refleurit.', url: 'https://www.we-theagency.com/la-beaute/' },
    ]}
    columns={3} 
    />

</section>

<section id="Gateways" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Gateways</h2>
    </div>

<ClickableMasonryGrid 
    images={[
      {src: '/images/Monaco.webp', alt: 'Visit Monaco', caption: 'Visit Monaco', url: 'https://www.we-theagency.com/visit-monaco/' },
      {src: '/images/garenne.webp', alt: 'Garenne', caption: 'Garenne - On chante en c≈ìur, les oliviers sont bleus et l‚Äôamour est joyeux.', url: 'https://www.we-theagency.com/garenne-des-oliviers-et-des-vignes/' },
      {src: '/images/horloger.webp', alt: 'H√¥tel des horlogers', caption: 'H√¥tel des horlogers', url: 'https://www.we-theagency.com/make-time-hotel-des-horlogers/' },
      {src: '/images/Perolles.webp', alt: 'Le P√©rolles', caption: 'Le P√©rolles', url: 'https://www.wepopup.net/prod/dialogue-entre-larchitecture-et-lart-culinaire/' },
      {src: '/images/Hilton.webp', alt: 'Hilton Geneva', caption: 'Hilton Geneva & Conference Centre - un h√¥tel genevois d√©di√© au tourisme d‚Äôaffaires.', url: 'https://www.wepopup.net/prod/travel-with-purpose-une-journee-au-hilton-geneva/' },
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={3} 
  />


</section>
<section id="Meet" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Meet</h2>
    </div>

<ClickableMasonryGrid 
    images={[
      {src: '/images/futuriste.webp', alt: 'Art et science', caption: 'Art et science. Cultivons l‚Äôhybridit√©.', url: 'https://www.we-theagency.com/art-et-science-cultivons-lhybridite/' },
      {src: '/images/ArtScience.webp', alt: 'Art et science', caption: 'Art et science. Cultivons l‚Äôhybridit√©.', url: 'https://www.we-theagency.com/art-et-science-cultivons-lhybridite/' },
      {src: '/images/Laigneau.webp', alt: 'Pauline Laigneau', caption: 'Pauline Laigneau - Le Podcast Le Gratin.', url: 'https://www.we-theagency.com/meet-paulinelaigneau/' },
      {src: '/images/SOSF.webp', alt: 'Save Our Seas', caption: 'Save Our Seas - Interview with James Lea.', url: 'https://www.we-theagency.com/save-our-seas/' },
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={3} 
  />
</section>

<section id="Art" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
  <div class="hero-container">
      <h2 class="hero-title-first">Art & Book</h2>
    </div>

<ClickableMasonryGrid 
    images={[
      {src: '/images/MMenzi.webp', alt: 'Manuela Menzi Studio', caption: 'Manuela Menzi Studio', url: 'https://www.wepopup.net/prod/manuela-menzi-studio/' },
      {src: '/images/DiamantBleu.webp', alt: 'Le Diamant Bleu', caption: 'Le Diamant Bleu', url: 'https://www.we-theagency.com/le-diamant-bleu/' },
      // Ajoutez autant d'images que vous voulez ici
    ]}
    columns={2} 
  />

</section>

<section id="Edition" class="hero-section-first">
 <div class="spacer-top"></div>  
 <div class="divider-line"></div>
    <div class="hero-container">
      <h2 class="hero-title-first">Editions</h2>
    </div>


<UniformGrid
    images={[
      { src: '/images/COVERfw21.webp', alt: 'We Le Magazine', caption: 'We Le Magazine - Fall 2021', pdfUrl: '/images/COVERfw21.pdf'  },
      { src: '/images/COVERss21.webp', alt: 'We Le Magazine', caption: 'We Le Magazine - Spring 2021', pdfUrl: '/images/COVERss21.pdf' },
      { src: '/images/COVERfw20.webp', alt: 'We Le Magazine', caption: 'BrandMooks - Fall 2020', pdfUrl: '/images/COVERfw20.pdf' },
      { src: '/images/COVERss20.webp', alt: 'We Le Magazine', caption: 'BrandMooks - Spring 2020', pdfUrl: '/images/COVERss20.pdf' },
      { src: '/images/COVERfw19.webp', alt: 'We Le Magazine', caption: 'BrandMooks - Fall 2019', pdfUrl: '/images/COVERfw19.pdf' },
    ]}
    columns={3} 
  />
</section>

<div id="pdfViewerModal" class="pdf-modal">
    <div class="pdf-modal-content">
        <span class="pdf-close-btn" onclick="closePdfViewer()">&times;</span>
        <h3 id="pdfTitle"></h3>
        <iframe id="pdfIframe" src="" frameborder="0" width="100%" height="100%"></iframe>
    </div>
</div>


<BackToTop />
</Layout>

<style>

 /* Hero Sections - Style Elementor */
  .hero-section-first,
  .hero-section-second {
    width: 100%;
    padding: 0;
    margin: 0;
  }

  .hero-container {
    width: 100%;
    max-width: 100%;
    padding-left: 2rem;
    padding-right: 2rem;
    margin: 0 auto;
  }

  .hero-title-second {
    font-family: var(--font-main);
    font-size: 30px;
    font-weight: 400;
    line-height: 1.4;
    letter-spacing: 4px;
    color: #000;
    margin: 0;
    padding: 1.5rem 0;
    text-align: center;
  }

  .hero-title-first {
    font-family: var(--font-main);
    font-size: 50px;
    font-weight: 700;
    line-height: 1.4;
    letter-spacing: 5px;
    color: #000;
    margin: 0;
    padding: 1.5rem 0;
    text-align: center;
  }

  /* Divider */
  .divider-line {
    width: 100%;
    height: 1px;
    background: #000;
    margin: 2rem 0;
  }
  
  /* Spacer pour √©viter que le contenu soit cach√© sous les navs */
  .spacer-top {
    height: 130px; /* Header (80px) + Subnav (60px) + marge (40px) */
  }

/* Navigation secondaire flottante - Style identique au header */
.floating-subnav {
  position: fixed;
  top: 10px;
  left: 2%;
  width: auto;
  max-width: 200px;
  z-index: 9999;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  overflow: hidden;
}

.floating-subnav:hover {
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.55);
  transform: translateX(-2%) translateY(-2px);
}

  .subnav-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    align-items: flex-start; /* Aligne le contenu √† gauche (mieux pour un menu vertical) */
    justify-content: center;
    padding: 0.1rem 0.2rem;
    gap: 0.1rem;
  }

/* Masque tous les liens par d√©faut */
.subnav-link {
  /* Style de base... */
  opacity: 0;
  max-height: 0;
  padding: 5; /* Important : supprime le padding pour le masquer */
  margin: 0;
  visibility: hidden;
  transition: opacity 0.3s, max-height 0.3s, padding 0.3s, margin 0.3s, transform 0.3s ease;
}

/* Affiche UNIQUEMENT le lien actif */
.subnav-link.active {
  opacity: 1;
  max-height: 50px; /* Une hauteur suffisante pour le lien */
  padding: 0.75rem 1.25rem; /* R√©tablit le padding du lien actif */
  margin: 0.5rem 0.5rem; /* Ajoute un petit espace vertical */
  visibility: visible;
  /* Styles de couleur actifs (conserv√©s) */
  background: linear-gradient(45deg, #857f74, #000000);
  color: white;
  box-shadow: 0 3px 5px rgba(102, 126, 234, 0.1);
}


/* üöÄ NOUVEAU : Affiche TOUS les liens au survol du conteneur parent */
.floating-subnav:hover .subnav-link {
  opacity: 1;
  max-height: 50px; /* Hauteur maximale pour le d√©ploiement */
  padding: 0.75rem 1.25rem; /* R√©tablit le padding pour tous les liens */
  margin: 0.1rem 0;
  visibility: visible;
  /* Le lien actif garde ses styles de couleur sp√©cifiques */
}

/* R√®gle de survol pour les liens NON actifs */
.floating-subnav:hover .subnav-link:not(.active):hover {
  background: rgba(171, 171, 171, 0.3); /* Effet de survol sur les autres liens */
  color: #000000;
  transform: translateY(-2px);
}

  .subnav-link:hover {
    background: rgba(171, 171, 171, 0.3);
    color: #000000;
    transform: translateY(-2px);
  }

  .subnav-link.active {
    background: linear-gradient(45deg, #857f74, #000000);
    color: white;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
  }

  .subnav-link .nav-icon {
    margin-right: 0.5rem;
    font-size: 0.8rem;
  }

  .subnav-link .nav-text {
    font-weight: 200;
    font-size: 0.8rem;
  }

  /* Scroll Effect pour la subnav */
  .floating-subnav.scrolled {
    background: rgba(255, 255, 255, 0.5);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  }


  /* Responsive */
  @media (max-width: 1024px) {
    .floating-subnav {
      top: 90px;
      width: 90%;
    }

    .subnav-container {
      padding: 0.5rem 1rem;
      gap: 0.25rem;
    }

    .subnav-link {
      padding: 0.6rem 1rem;
    }

    .subnav-link .nav-text {
      font-size: 0.9rem;
    }

    .hero-container {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (max-width: 768px) {
    .spacer-top {
      height: 160px;
    }

    .hero-title-first {
      font-size: 20px;
      padding: 1rem 0;
    }

    .hero-title-second {
      font-size: 18px;
      padding: 1rem 0;
    }

    .hero-container {
      padding-left: 1rem;
      padding-right: 1rem;
    }

   .content-section {
      padding: 2rem 0 4rem 0;
    }
  }

  
@media (max-width: 480px) {
  .spacer-top {
    height: 140px;
  }

  .hero-title-first {
    font-size: 18px;
  }

  .hero-title-second {
    font-size: 16px;
  }

  .hero-container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }

  .text-content {
    font-size: 13px;
  }
}

/* --- Modale PDF Responsive --- */
.pdf-modal {
    display: none; /* Masqu√© par d√©faut */
    position: fixed;
    z-index: 10000; /* Assurez-vous qu'elle est au-dessus de tout */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9); /* Fond noir semi-transparent */
}

.pdf-modal.open {
    display: block;
}

.pdf-modal-content {
    background-color: #fefefe;
    margin: 1% auto; /* Centrage vertical et horizontal */
    padding: 20px;
    border: 1px solid #888;
    width: 95%; /* Largeur de la modale sur ordinateur */
    height: 95%; /* Hauteur pour que l'iframe soit grand */
    position: relative;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
}

#pdfTitle {
    margin-top: 0;
    margin-bottom: 10px;
    text-align: center;
    font-size: 1.2rem;
    color: #333;
}

#pdfIframe {
    flex-grow: 1; /* L'iframe prend tout l'espace restant dans la modale */
    border: none;
}

/* Bouton Fermer */
.pdf-close-btn {
    color: #aaa;
    position: absolute;
    top: 10px;
    right: 25px;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    line-height: 20px;
    transition: 0.3s;
}

.pdf-close-btn:hover,
.pdf-close-btn:focus {
    color: #000;
}

/* Responsive pour les petits √©crans */
@media (max-width: 768px) {
    .pdf-modal-content {
        width: 95%; /* Modale plus large sur mobile */
        height: 95%; 
        margin: 2.5% auto;
    }
}

</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const sections = document.querySelectorAll('section[id]');
  const subnavLinks = document.querySelectorAll('.subnav-link');

  // Fonction pour mettre √† jour le lien actif
  function updateActiveLink() {
    let currentSection = '';
    const scrollPosition = window.scrollY + 200; // Offset pour d√©clencher plus t√¥t

    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.offsetHeight;
      
      if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
        currentSection = section.getAttribute('id');
      }
    });

    // Mettre √† jour les liens actifs
    subnavLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === `#${currentSection}`) {
        link.classList.add('active');
      }
    });
  }

  // √âcouter le scroll
  window.addEventListener('scroll', updateActiveLink);
  
  // √âcouter les clics sur les liens pour une navigation smooth
  subnavLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = link.getAttribute('href').substring(1);
      const targetSection = document.getElementById(targetId);
      
      if (targetSection) {
        const offsetTop = targetSection.offsetTop - 150; // Ajuster l'offset selon vos besoins
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
        
        // Mettre √† jour imm√©diatement le lien actif
        subnavLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      }
    });
  });

  // Appeler une premi√®re fois au chargement
  updateActiveLink();
});

// Fonctions de gestion de la modale PDF
  window.openPdfViewer = function(pdfUrl, title) {
    if (!pdfUrl) return;

    const modal = document.getElementById('pdfViewerModal');
    const iframe = document.getElementById('pdfIframe');
    const pdfTitle = document.getElementById('pdfTitle');

// Construction des param√®tres d'URL
    let finalUrl = pdfUrl;
    
 // D√©tecter la taille de l'√©cran pour le mode responsive (mobile)
    const isMobile = window.matchMedia("only screen and (max-width: 768px)").matches;

    if (!isMobile) {
      // ‚úÖ Mode Double Page avec Page de Garde (pour Desktop)
      // view=TwoPageRight: Force la mise en page double page.
      // L'effet "page de garde s√©par√©e" est obtenu car la page 1 n'a pas de page √† sa gauche.
      finalUrl += '#pagemode=ShowCoverPageDuringTwoUp&pageLayout=TwoColumnRight&page=1'; 
    } else {
      // Mode Page Simple pour Mobile (plus facile √† lire)
      finalUrl += '#toolbar=0&view=Fit';
    }

    iframe.src = pdfUrl; 
    pdfTitle.textContent = title;
    
    modal.classList.add('open');
    document.body.style.overflow = 'hidden'; 
  }

  window.closePdfViewer = function() {
    const modal = document.getElementById('pdfViewerModal');
    const iframe = document.getElementById('pdfIframe');
    
    modal.classList.remove('open');
    iframe.src = '';
    document.body.style.overflow = 'auto';
  }
  
  // Fermer si l'utilisateur clique en dehors de la modale
  const modal = document.getElementById('pdfViewerModal');
  if (modal) {
      window.addEventListener('click', (event) => {
          if (event.target === modal) {
              window.closePdfViewer();
          }
      });
  }

</script>